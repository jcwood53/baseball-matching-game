<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Field Explorer — Labeled Diagram Replica</title>
<style>
  :root{
    --bg:#e6f9ff;
    --grassA:#2e8b57;
    --grassB:#2ca552;
    --dirt:#c99a5a;
    --base-white:#ffffff;
    --stroke:#0d3942;
    --muted:#56686b;
    --accent:#ffb400;
    --card-bg:#ffffff;
    --maxW:1100px;
  }
  html,body{height:100%;margin:0;}
  body{
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(180deg,var(--bg), #d9f0f8 60%);
    display:flex;
    align-items:flex-start;
    justify-content:center;
    padding:20px;
    color:var(--stroke);
  }

  .frame{
    width:100%;
    max-width:var(--maxW);
    background:linear-gradient(180deg,#ffffff,#fbffff);
    box-shadow:0 12px 34px rgba(6,30,40,0.12);
    border-radius:12px;
    padding:18px;
    box-sizing:border-box;
  }

  header{display:flex;align-items:flex-start;gap:14px;margin-bottom:12px}
  h1{font-size:20px;margin:0;color:var(--stroke)}
  .sub{color:var(--muted);font-size:13px;margin-top:4px}

  .layout{display:flex;gap:18px;flex-wrap:wrap}
  .field-panel{flex:1 1 720px;min-width:320px;background:linear-gradient(180deg,#e9fbef,#dff6eb);padding:10px;border-radius:10px;position:relative}
  .side{width:300px;min-width:240px}

  .panel{background:#fff;border-radius:10px;padding:12px;border:1px solid rgba(0,0,0,0.04);box-shadow:0 6px 18px rgba(6,30,40,0.04)}

  svg{width:100%;height:auto;display:block}

  /* Info card */
  .info{
    position:absolute;
    z-index:40;
    min-width:240px;
    max-width:300px;
    background:var(--card-bg);
    border-radius:10px;
    padding:12px;
    box-shadow:0 12px 30px rgba(6,30,40,0.12);
    border:1px solid rgba(6,30,40,0.06);
    display:none;
  }
  .info h3{margin:0 0 6px;font-size:15px;color:var(--stroke)}
  .info p{margin:0;color:var(--muted);font-size:13px;line-height:1.3}
  .info .close{position:absolute;right:8px;top:8px;cursor:pointer;color:var(--muted)}

  .tip{font-size:13px;color:var(--muted);margin-top:8px}
  .legend-item{display:flex;align-items:center;gap:8px;font-size:13px;color:var(--muted)}
  .sw{width:14px;height:14px;border-radius:3px}

  /* small completion */
  .done{display:none;margin-top:10px;padding:10px;border-radius:8px;background:linear-gradient(90deg,#fff7e6,#fff2dc);color:#8a5a00;font-weight:700}
  button.hot{display:block;width:100%;text-align:left;padding:8px 10px;border-radius:8px;border:1px solid rgba(6,30,40,0.04);background:#fff;cursor:pointer}
  button.hot:focus{outline:2px solid rgba(43,122,87,0.12)}
  @media (max-width:860px){.layout{flex-direction:column-reverse}.side{width:100%}}
</style>
</head>
<body>
  <div class="frame" role="main" aria-labelledby="title">
    <header>
      <div>
        <h1 id="title">Baseball Field Explorer — Diagram Replica</h1>
        <div class="sub">Diamond placed low; baselines, foul lines, coach boxes, dugouts, on-deck, and labeled positions included.</div>
      </div>
    </header>

    <div class="layout">
      <section class="field-panel panel" aria-label="Baseball field area">
        <!-- Info card -->
        <div id="infoCard" class="info" role="dialog" aria-hidden="true">
          <div class="close" id="cardClose" tabindex="0" aria-label="Close">✕</div>
          <h3 id="infoTitle">Title</h3>
          <p id="infoBody">Description</p>
        </div>

        <!-- SVG field: viewBox chosen to allow room for outfield labels -->
        <svg id="fieldSVG" viewBox="0 0 1200 900" role="img" aria-label="Baseball field diagram">
          <defs>
            <linearGradient id="grassG" x1="0" x2="1">
              <stop offset="0" stop-color="#2e8b57"/>
              <stop offset="1" stop-color="#2ca552"/>
            </linearGradient>
            <radialGradient id="dirtG" cx="50%" cy="35%">
              <stop offset="0%" stop-color="#d9b07a"/>
              <stop offset="100%" stop-color="#c99a5a"/>
            </radialGradient>
          </defs>

          <!-- background -->
          <rect x="0" y="0" width="1200" height="900" fill="url(#grassG)" />

          <!-- foul lines to outfield -->
          <line x1="600" y1="700" x2="1100" y2="60" stroke="#fff" stroke-width="3" stroke-dasharray="6 2" />
          <line x1="600" y1="700" x2="100" y2="60" stroke="#fff" stroke-width="3" stroke-dasharray="6 2" />

          <!-- fair arc (visual) -->
          <path d="M100 120 A500 500 0 0 1 1100 120 L1100 140 A520 520 0 0 0 100 140 Z" fill="rgba(0,0,0,0.06)"/>

          <!-- diamond (dirt) — positioned lower on field -->
          <!-- We'll center diamond around x=600, y=520 with basepath 220 units for visuals -->
          <g id="diamondGroup" transform="translate(600,520)">
            <!-- dirt diamond (rotated square to form diamond) -->
            <g transform="rotate(0)">
              <path d="M0 -220 L155 0 L0 220 L-155 0 Z" fill="url(#dirtG)" stroke="#b4824d" stroke-width="2"/>
            </g>

            <!-- baselines (white lines along basepaths) -->
            <path d="M0 -220 L155 0" stroke="#fff" stroke-width="6" stroke-linecap="round"/>
            <path d="M155 0 L0 220" stroke="#fff" stroke-width="6" stroke-linecap="round"/>
            <path d="M0 220 L-155 0" stroke="#fff" stroke-width="6" stroke-linecap="round"/>
            <path d="M-155 0 L0 -220" stroke="#fff" stroke-width="6" stroke-linecap="round"/>

            <!-- baseline edges (thin inner) for definition -->
            <path d="M0 -220 L155 0" stroke="#f3e6d0" stroke-width="2" stroke-linecap="round" opacity="0.7"/>
            <path d="M155 0 L0 220" stroke="#f3e6d0" stroke-width="2" stroke-linecap="round" opacity="0.7"/>
            <path d="M0 220 L-155 0" stroke="#f3e6d0" stroke-width="2" stroke-linecap="round" opacity="0.7"/>
            <path d="M-155 0 L0 -220" stroke="#f3e6d0" stroke-width="2" stroke-linecap="round" opacity="0.7"/>

            <!-- bases: squares rotated to be 'bags' -->
            <!-- first base (right corner) -->
            <g id="firstGroup" transform="translate(155,0)">
              <rect id="firstBase" class="hotspot" x="-18" y="-18" width="36" height="36" fill="#fff" stroke="#c6c6c6" stroke-width="3" rx="3" tabindex="0" role="button" aria-label="First base"/>
              <text x="0" y="60" font-size="12" text-anchor="middle" fill="#0b3b40">First base</text>
            </g>

            <!-- second base (top corner) -->
            <g id="secondGroup" transform="translate(0,-220)">
              <rect id="secondBase" class="hotspot" x="-18" y="-18" width="36" height="36" fill="#fff" stroke="#c6c6c6" stroke-width="3" rx="3" tabindex="0" role="button" aria-label="Second base"/>
              <text x="0" y="-48" font-size="12" text-anchor="middle" fill="#0b3b40">Second base</text>
            </g>

            <!-- third base (left corner) -->
            <g id="thirdGroup" transform="translate(-155,0)">
              <rect id="thirdBase" class="hotspot" x="-18" y="-18" width="36" height="36" fill="#fff" stroke="#c6c6c6" stroke-width="3" rx="3" tabindex="0" role="button" aria-label="Third base"/>
              <text x="0" y="60" font-size="12" text-anchor="middle" fill="#0b3b40">Third base</text>
            </g>

            <!-- home plate (bottom corner) as pentagon -->
            <g id="homeGroup" transform="translate(0,220)">
              <polygon id="homePlate" class="hotspot" points="-17,0 17,0 17,-13 0,-26 -17,-13" fill="#fff" stroke="#c6c6c6" stroke-width="2" tabindex="0" role="button" aria-label="Home plate"/>
              <text x="0" y="58" font-size="12" text-anchor="middle" fill="#0b3b40">Home plate</text>
            </g>

            <!-- pitcher's plate: white rectangular plate (rectangular base-width style) placed between home and second -->
            <g id="moundGroup" transform="translate(0,-72)">
              <!-- dirt mound ellipse behind -->
              <ellipse cx="0" cy="12" rx="60" ry="34" fill="#b97f4f" stroke="#9b6237" stroke-width="2" opacity="0.98"/>
              <!-- rectangular pitcher's plate (white rectangle but wider than tall) -->
              <rect id="mound" class="hotspot" x="-30" y="-10" width="60" height="14" rx="3" fill="#fff" stroke="#c6c6c6" stroke-width="2" tabindex="0" role="button" aria-label="Pitcher's plate"/>
              <text x="0" y="50" font-size="12" text-anchor="middle" fill="#0b3b40">Pitcher's plate</text>
            </g>

            <!-- shortstop icon: between and slightly behind second and third -->
            <g id="shortstopGroup" transform="translate(-80,-120)">
              <circle r="12" fill="#ffffff" stroke="#c6c6c6" stroke-width="2"/>
              <text x="0" y="34" font-size="12" text-anchor="middle" fill="#0b3b40">Shortstop</text>
            </g>

            <!-- baserunning lines for clarity (thin dashed) -->
            <path d="M0 -220 L0 220" stroke="#ffffff" stroke-width="1" opacity="0.08"/>
          </g>

          <!-- coach boxes outside baseline near first and third (offset a little outfield side) -->
          <!-- first base coach's box -->
          <rect x="760" y="500" width="60" height="24" rx="4" fill="#fff" stroke="#cfcfcf" />
          <text x="790" y="518" font-size="11" text-anchor="middle" fill="#596a6e">Coach box</text>

          <!-- third base coach's box -->
          <rect x="380" y="500" width="60" height="24" rx="4" fill="#fff" stroke="#cfcfcf" />
          <text x="410" y="518" font-size="11" text-anchor="middle" fill="#596a6e">Coach box</text>

          <!-- on-deck circles (near dugouts) -->
          <circle cx="200" cy="700" r="18" fill="#fff" stroke="#cfcfcf"/>
          <text x="200" y="732" font-size="11" text-anchor="middle" fill="#596a6e">On-deck</text>

          <circle cx="1000" cy="700" r="18" fill="#fff" stroke="#cfcfcf"/>
          <text x="1000" y="732" font-size="11" text-anchor="middle" fill="#596a6e">On-deck</text>

          <!-- dugouts -->
          <rect x="120" y="730" width="160" height="60" rx="8" fill="#f6f6f6" stroke="#e6e6e6"/>
          <text x="200" y="765" font-size="12" text-anchor="middle" fill="#596a6e">Dugout</text>

          <rect x="920" y="730" width="160" height="60" rx="8" fill="#f6f6f6" stroke="#e6e6e6"/>
          <text x="1000" y="765" font-size="12" text-anchor="middle" fill="#596a6e">Dugout</text>

          <!-- position labels around the field (align with your diagram) -->
          <text x="600" y="60" font-size="16" text-anchor="middle" fill="#fff" font-weight="700">Center Fielder</text>
          <text x="430" y="110" font-size="14" text-anchor="middle" fill="#fff">Left Fielder</text>
          <text x="770" y="110" font-size="14" text-anchor="middle" fill="#fff">Right Fielder</text>

          <text x="530" y="360" font-size="13" text-anchor="middle" fill="#fff">Second baseman</text>
          <text x="440" y="440" font-size="13" text-anchor="middle" fill="#fff">Shortstop</text>
          <text x="330" y="520" font-size="13" text-anchor="middle" fill="#fff">Third baseman</text>
          <text x="870" y="520" font-size="13" text-anchor="middle" fill="#fff">First baseman</text>

          <text x="600" y="540" font-size="13" text-anchor="middle" fill="#fff">Pitcher</text>
          <text x="600" y="690" font-size="13" text-anchor="middle" fill="#fff">Catcher</text>

        </svg>

        <div class="tip">Tip: Tab to a hotspot and press Enter or Space to open a description. Click elsewhere to close.</div>
      </section>

      <aside class="side">
        <div class="panel">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
            <div>
              <div style="font-size:13px;color:var(--muted)">Discovered</div>
              <div style="font-weight:700;font-size:18px;color:var(--stroke)"><span id="found">0</span> / <span id="total">8</span></div>
            </div>
            <div style="text-align:right">
              <div style="font-size:12px;color:var(--muted)">Field Diagram</div>
              <div style="font-weight:700;color:var(--accent)">Replica</div>
            </div>
          </div>

          <div class="legend-item" style="margin-bottom:10px"><div class="sw" style="background:var(--grassA)"></div><div>Outfield / Grass</div></div>
          <div class="legend-item" style="margin-bottom:10px"><div class="sw" style="background:var(--dirt)"></div><div>Infield / Dirt</div></div>

          <div style="margin-top:8px">
            <button class="hot" data-area="home">Home plate</button>
            <button class="hot" data-area="first">First base</button>
            <button class="hot" data-area="second">Second base</button>
            <button class="hot" data-area="third">Third base</button>
            <button class="hot" data-area="mound">Pitcher's plate</button>
            <button class="hot" data-area="shortstop">Shortstop</button>
            <button class="hot" data-area="infield">Infield</button>
            <button class="hot" data-area="outfield">Outfield</button>
          </div>

          <div class="done" id="done">All areas discovered — great!</div>
        </div>
      </aside>
    </div>
  </div>

<script>
  // Data for info cards (concise educator-friendly text)
  const descriptions = {
    home: {title:'Home Plate', text:'The batter stands here and runners must touch home plate to score. Shape helps the strike zone.'},
    first: {title:'First Base', text:"The first base a batter runs to after hitting. Fielders often try to put runners out here."},
    second: {title:'Second Base', text:'The base located at the top corner of the diamond; a common place for double-play pivots.'},
    third: {title:'Third Base', text:"Third base is the final base before home; often called the 'hot corner' for hard-hit balls."},
    mound: {title:"Pitcher's plate", text:"The rectangular white plate the pitcher uses (visualized as a narrow white plate here); it's located on the mound."},
    shortstop: {title:"Shortstop", text:"Positioned between second and third, slightly behind second; key infield defender."},
    infield: {title:"Infield", text:"The dirt area connecting the bases where grounders and quick throws happen."},
    outfield: {title:"Outfield", text:"The grassy area beyond the baselines; divided into left, center, and right field."}
  };

  // Map clickable selectors to areas
  const map = {
    home: ['#homePlate','button[data-area="home"]'],
    first: ['#firstBase','button[data-area="first"]'],
    second: ['#secondBase','button[data-area="second"]'],
    third: ['#thirdBase','button[data-area="third"]'],
    mound: ['#mound','button[data-area="mound"]'],
    shortstop: ['#shortstopGroup','button[data-area="shortstop"]'],
    infield: ['#diamondGroup','button[data-area="infield"]'],
    outfield: ['#fieldSVG','button[data-area="outfield"]']
  };

  const found = new Set();
  const primary = ['home','first','second','third','mound','shortstop','infield','outfield'];

  // elements
  const infoCard = document.getElementById('infoCard');
  const infoTitle = document.getElementById('infoTitle');
  const infoBody = document.getElementById('infoBody');
  const cardClose = document.getElementById('cardClose');
  const foundEl = document.getElementById('found');
  const totalEl = document.getElementById('total');
  totalEl.textContent = primary.length;

  function show(area, ev){
    const data = descriptions[area];
    if(!data) return;
    infoTitle.textContent = data.title;
    infoBody.textContent = data.text;
    infoCard.style.display = 'block';
    infoCard.setAttribute('aria-hidden','false');

    // track discovered
    if(!found.has(area) && primary.includes(area)){
      found.add(area);
      foundEl.textContent = found.size;
      if(found.size === primary.length){
        document.getElementById('done').style.display = 'block';
      }
    }

    // position card near pointer / element
    let x = window.innerWidth/2, y = window.innerHeight/2;
    if(ev && ev.clientX){
      x = ev.clientX + 12;
      y = ev.clientY + 6;
    } else {
      // center near field panel
      const svg = document.getElementById('fieldSVG');
      const rect = svg.getBoundingClientRect();
      x = rect.left + rect.width*0.65;
      y = rect.top + rect.height*0.35;
    }
    infoCard.style.left = Math.max(12, x) + 'px';
    infoCard.style.top = Math.max(12, y) + 'px';

    // ensure fits in viewport (simple clamp)
    requestAnimationFrame(()=>{
      const r = infoCard.getBoundingClientRect();
      const pad = 12;
      if(r.right > window.innerWidth - pad) infoCard.style.left = (window.innerWidth - r.width - pad) + 'px';
      if(r.bottom > window.innerHeight - pad) infoCard.style.top = (window.innerHeight - r.height - pad) + 'px';
    });
  }

  function hide(){
    infoCard.style.display = 'none';
    infoCard.setAttribute('aria-hidden','true');
  }

  // wire map
  Object.keys(map).forEach(key=>{
    const [selSvg, selBtn] = map[key];
    const svgEl = document.querySelector(selSvg);
    const btnEl = document.querySelector(selBtn);
    if(svgEl){
      svgEl.addEventListener('click', (e)=>{ e.stopPropagation(); show(key, e); });
      svgEl.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') show(key, e); });
    }
    if(btnEl){
      btnEl.addEventListener('click', (e)=>{ show(key, e); });
      btnEl.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') show(key, e); });
    }
  });

  // close handlers
  cardClose.addEventListener('click', hide);
  cardClose.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') hide(); });

  document.addEventListener('click', (e)=>{
    const isHot = e.target.closest('.hotspot') || e.target.closest('.panel') || e.target.closest('.info');
    if(!isHot) hide();
  });
  document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') hide(); });

  // accessibility: ensure SVG hotspots have tabindex (they do in markup). Ensure buttons are usable (they are).
  // small resize handler to adjust card position if visible
  window.addEventListener('resize', ()=>{ if(infoCard.style.display==='block'){ /* could reposition if needed */ }});
</script>
</body>
</html>
