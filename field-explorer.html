<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Field Explorer — Adjusted Proportions</title>
<style>
  :root{
    --bg:#eaf8ff;
    --grass-dark:#225e38;
    --grass-light:#2f8c57;
    --dirt-1:#d6a770;
    --dirt-2:#c28f4f;
    --base-white:#ffffff;
    --muted:#51686c;
    --accent:#faad33;
    --stroke:#0b3940;
    --card-bg:#ffffff;
    --max-w:1500px;
  }
  html,body{height:100%;margin:0}
  body{
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    background: linear-gradient(180deg,var(--bg), #d9eff8 60%);
    display:flex;justify-content:center;padding:16px;color:var(--stroke);
  }
  .wrap{width:100%;max-width:var(--max-w);background:#fff;border-radius:12px;box-shadow:0 12px 36px rgba(6,30,40,0.12);padding:16px;box-sizing:border-box}
  header{display:flex;align-items:baseline;gap:12px;margin-bottom:12px}
  h1{margin:0;font-size:20px}
  .subtitle{color:var(--muted);font-size:13px;margin-top:6px}
  .layout{display:flex;gap:14px;flex-wrap:wrap}
  .field{flex:1 1 920px;min-width:360px;background:linear-gradient(180deg,#e9fbef,#dff6eb);padding:10px;border-radius:10px;position:relative}
  .side{width:320px;min-width:260px}
  .panel{background:#fff;border-radius:10px;padding:12px;border:1px solid rgba(0,0,0,0.04);box-shadow:0 6px 18px rgba(6,30,40,0.04)}
  svg{width:100%;height:auto;display:block}
  .info{position:absolute;z-index:50;min-width:240px;background:var(--card-bg);border-radius:10px;padding:12px;box-shadow:0 12px 30px rgba(6,30,40,0.12);border:1px solid rgba(6,30,40,0.06);display:none}
  .info h3{margin:0 0 8px;font-size:15px;color:var(--stroke)}
  .info p{margin:0;color:var(--muted);font-size:13px;line-height:1.35}
  .info .close{position:absolute;right:8px;top:8px;cursor:pointer;color:var(--muted)}
  .legend-item{display:flex;align-items:center;gap:8px;font-size:13px;color:var(--muted);margin-bottom:8px}
  .sw{width:14px;height:14px;border-radius:3px}
  .tip{font-size:13px;color:var(--muted);margin-top:10px}
  .btn-list button{display:block;width:100%;text-align:left;padding:10px 12px;border-radius:8px;border:1px solid rgba(6,30,40,0.04);background:#fff;margin-bottom:8px;cursor:pointer}
  .btn-list button:focus{outline:2px solid rgba(43,122,87,0.12)}
  @media (max-width:880px){.layout{flex-direction:column-reverse}.side{width:100%}}
</style>
</head>
<body>
  <div class="wrap" role="main">
    <header>
      <div>
        <h1>Field Explorer — Adjusted Proportions</h1>
        <div class="subtitle">Outfield enlarged to match infield; mound circular and closer; plates, labels, coach boxes adjusted.</div>
      </div>
    </header>

    <div class="layout">
      <section class="field panel" aria-label="Baseball field">
        <div id="infoCard" class="info" role="dialog" aria-hidden="true">
          <div class="close" id="cardClose" tabindex="0" aria-label="Close">✕</div>
          <h3 id="infoTitle">Title</h3>
          <p id="infoBody">Description</p>
        </div>

        <!-- SVG field: larger canvas so outfield can expand -->
        <svg id="fieldSVG" viewBox="0 0 1800 1500" role="img" aria-label="Baseball field diagram">
          <defs>
            <linearGradient id="gGrass" x1="0" x2="1">
              <stop offset="0" stop-color="var(--grass-light)"/>
              <stop offset="1" stop-color="var(--grass-dark)"/>
            </linearGradient>
            <radialGradient id="dirtR" cx="50%" cy="35%">
              <stop offset="0%" stop-color="#e2b887"/>
              <stop offset="100%" stop-color="#c79b59"/>
            </radialGradient>
            <filter id="soft" x="-50%" y="-50%" width="200%" height="200%"><feDropShadow dx="0" dy="10" stdDeviation="18" flood-color="#0a1a22" flood-opacity="0.12"/></filter>
          </defs>

          <!-- full grass/background enlarged to match diamond -->
          <rect x="0" y="0" width="1800" height="1500" fill="url(#gGrass)"/>

          <!-- large outfield arc and warning track scaled outward so grass fits the infield size -->
          <path d="M140 220 A920 920 0 0 1 1660 220 L1660 300 A940 940 0 0 0 140 300 Z" fill="#d9c0a0" opacity="0.56"/>

          <!-- Diamond center; chosen to give large outfield space: center at (900,800).
               Diamond is a perfect square rotated into diamond shape. Side radius R = 680 (approx). -->
          <g id="diamondRoot" transform="translate(900,800)">
            <!-- infield dirt as perfect rotated square (diamond) -->
            <path id="infieldDirt" d="M0 -680 L680 0 L0 680 L-680 0 Z" fill="url(#dirtR)" stroke="#b07a49" stroke-width="2" filter="url(#soft)"/>

            <!-- baselines (thick white) -->
            <path d="M0 -680 L680 0" stroke="#fff" stroke-width="16" stroke-linecap="round"/>
            <path d="M680 0 L0 680" stroke="#fff" stroke-width="16" stroke-linecap="round"/>
            <path d="M0 680 L-680 0" stroke="#fff" stroke-width="16" stroke-linecap="round"/>
            <path d="M-680 0 L0 -680" stroke="#fff" stroke-width="16" stroke-linecap="round"/>

            <!-- thin chalk edges -->
            <path d="M0 -680 L680 0" stroke="#f4e6cf" stroke-width="4" opacity="0.8"/>
            <path d="M680 0 L0 680" stroke="#f4e6cf" stroke-width="4" opacity="0.8"/>
            <path d="M0 680 L-680 0" stroke="#f4e6cf" stroke-width="4" opacity="0.8"/>
            <path d="M-680 0 L0 -680" stroke="#f4e6cf" stroke-width="4" opacity="0.8"/>

            <!-- Bases increased and centered on corners: 110x110 for larger tappable targets -->
            <g id="firstGroup" transform="translate(680,0)">
              <rect id="firstBase" class="hotspot" x="-55" y="-55" width="110" height="110" rx="6" fill="#fff" stroke="#c6c6c6" stroke-width="5" tabindex="0" role="button" aria-label="First base"></rect>
              <text id="firstLabel" x="0" y="142" font-size="22" text-anchor="middle" fill="#fff">First</text>
            </g>

            <g id="secondGroup" transform="translate(0,-680)">
              <rect id="secondBase" class="hotspot" x="-55" y="-55" width="110" height="110" rx="6" fill="#fff" stroke="#c6c6c6" stroke-width="5" tabindex="0" role="button" aria-label="Second base"></rect>
              <text id="secondLabel" x="0" y="-142" font-size="22" text-anchor="middle" fill="#fff">Second</text>
            </g>

            <g id="thirdGroup" transform="translate(-680,0)">
              <rect id="thirdBase" class="hotspot" x="-55" y="-55" width="110" height="110" rx="6" fill="#fff" stroke="#c6c6c6" stroke-width="5" tabindex="0" role="button" aria-label="Third base"></rect>
              <text id="thirdLabel" x="0" y="142" font-size="22" text-anchor="middle" fill="#fff">Third</text>
            </g>

            <!-- home plate: rotated 180 degrees (point facing outfield correctly) -->
            <g id="homeGroup" transform="translate(0,680) rotate(180)">
              <polygon id="homePlate" class="hotspot" points="-48,0 48,0 48,-34 0,-68 -48,-34" fill="#fff" stroke="#c6c6c6" stroke-width="4" tabindex="0" role="button" aria-label="Home plate"></polygon>
            </g>

            <!-- Pitcher's mound: circular mound moved slightly closer to home (from -120 to -105),
                 mound circle radius increased for visibility, pitcher's plate shortened by 1/3 and thickened -->
            <g id="moundGroup" transform="translate(0,-105)">
              <circle id="moundCircle" cx="0" cy="0" r="86" fill="#b97f4f" stroke="#9b6237" stroke-width="5" filter="url(#soft)"></circle>
              <!-- pitcher's plate: width = 110 (same as base width), height shortened by 1/3 => if original 12, now 8;
                   increased stroke thickness for visual 'double thickness' -->
              <rect id="pitcherPlate" class="hotspot" x="-55" y="-8" width="110" height="8" rx="3" fill="#fff" stroke="#7a7a7a" stroke-width="3" tabindex="0" role="button" aria-label="Pitcher's plate"></rect>
            </g>

            <!-- Shortstop positioned between and slightly behind second and third -->
            <g id="shortstopGroup" transform="translate(-210,-360)">
              <circle id="shortstop" class="hotspot" r="26" fill="#fff" stroke="#c6c6c6" stroke-width="4" tabindex="0" role="button" aria-label="Shortstop"></circle>
              <text x="0" y="72" font-size="18" text-anchor="middle" fill="#fff">SS</text>
            </g>

            <!-- faint center axis for orientation -->
            <line x1="0" y1="-760" x2="0" y2="760" stroke="#ffffff" stroke-width="1" opacity="0.04"/>
          </g>

          <!-- Foul lines aligned with baselines: draw lines from rotated home plate corners along baseline vectors -->
          <!-- Compute home center = (900,1480) because diamond center (900,800) + bottom offset 680 => 1480 -->
          <line id="foulRight" x1="900" y1="1480" x2="1700" y2="240" stroke="#fff" stroke-width="6" stroke-linecap="round"/>
          <line id="foulLeft" x1="900" y1="1480" x2="100" y2="240" stroke="#fff" stroke-width="6" stroke-linecap="round"/>
          <line x1="900" y1="1480" x2="1700" y2="240" stroke="#f7ead7" stroke-width="2" stroke-dasharray="8 5" opacity="0.6"/>
          <line x1="900" y1="1480" x2="100" y2="240" stroke="#f7ead7" stroke-width="2" stroke-dasharray="8 5" opacity="0.6"/>

          <!-- Coach boxes rotated to be parallel with baselines (45deg) and offset just outside the baselines near first/third -->
          <g id="coachBoxes">
            <g transform="translate(900,800) translate(520,110) rotate(45)">
              <rect x="-84" y="-24" width="168" height="48" rx="8" fill="#fff" stroke="#d9d9d9"></rect>
              <text x="0" y="8" font-size="16" text-anchor="middle" fill="#596a6e">Coach's box</text>
            </g>
            <g transform="translate(900,800) translate(-520,110) rotate(-45)">
              <rect x="-84" y="-24" width="168" height="48" rx="8" fill="#fff" stroke="#d9d9d9"></rect>
              <text x="0" y="8" font-size="16" text-anchor="middle" fill="#596a6e">Coach's box</text>
            </g>
          </g>

          <!-- On-deck circles moved inward toward home by ~40 units laterally (approx 2 inches in scale) -->
          <g id="onDecks">
            <circle cx="280" cy="1160" r="32" fill="#fff" stroke="#d9d9d9"></circle>
            <text x="280" y="1208" font-size="14" text-anchor="middle" fill="#596a6e">On-deck</text>

            <circle cx="1520" cy="1160" r="32" fill="#fff" stroke="#d9d9d9"></circle>
            <text x="1520" y="1208" font-size="14" text-anchor="middle" fill="#596a6e">On-deck</text>
          </g>

          <!-- Dugouts moved to the bottom corners at the edge of diagram -->
          <g id="dugouts">
            <rect x="40" y="1330" width="260" height="120" rx="14" fill="#f6f6f6" stroke="#e6e6e6"></rect>
            <text x="170" y="1396" font-size="16" text-anchor="middle" fill="#596a6e">Dugout</text>

            <rect x="1500" y="1330" width="260" height="120" rx="14" fill="#f6f6f6" stroke="#e6e6e6"></rect>
            <text x="1630" y="1396" font-size="16" text-anchor="middle" fill="#596a6e">Dugout</text>
          </g>

          <!-- Outfield position labels moved outward into outfield and sized for legibility -->
          <g id="positions" fill="#fff" font-weight="700" text-anchor="middle">
            <text x="900" y="320" font-size="28">Center Fielder</text>
            <text x="650" y="420" font-size="24">Left Fielder</text>
            <text x="1150" y="420" font-size="24">Right Fielder</text>
          </g>

          <!-- Infield labels moved closer to bases and colored white for contrast -->
          <g id="infieldLabels" fill="#fff" text-anchor="middle">
            <text id="pitcherLabel" x="900" y="760" font-size="18">Pitcher</text>
            <text id="catcherLabel" x="900" y="1516" font-size="18">Catcher</text>
          </g>
        </svg>

        <div class="tip">Tip: Tab to hotspots (bases, pitcher's plate, shortstop) and press Enter/Space to open descriptions.</div>
      </section>

      <aside class="side">
        <div class="panel" aria-labelledby="legendTitle">
          <h3 id="legendTitle" style="margin:0 0 8px 0">Legend & Controls</h3>

          <div class="legend-item"><div class="sw" style="background:var(--grass-light)"></div><div>Outfield / Grass</div></div>
          <div class="legend-item"><div class="sw" style="background:var(--dirt-1)"></div><div>Infield / Dirt</div></div>

          <div style="margin:10px 0" class="btn-list" role="group" aria-label="Area buttons">
            <button data-area="home">Home plate</button>
            <button data-area="first">First base</button>
            <button data-area="second">Second base</button>
            <button data-area="third">Third base</button>
            <button data-area="mound">Pitcher's plate</button>
            <button data-area="shortstop">Shortstop</button>
            <button data-area="infield">Infield</button>
            <button data-area="outfield">Outfield</button>
          </div>

          <div style="margin-top:6px;color:var(--muted);font-size:13px">Discover areas by clicking or tabbing then pressing Enter. Progress shown below.</div>
          <div style="margin-top:12px;font-weight:700;font-size:18px;color:var(--stroke)"><span id="foundCount">0</span> / <span id="totalCount">8</span></div>
          <div id="complete" style="display:none;margin-top:10px;padding:8px;border-radius:8px;background:linear-gradient(90deg,#fff7e6,#fff2dc);color:#8a5a00">All areas discovered — nice!</div>
        </div>
      </aside>
    </div>
  </div>

<script>
  // Interactive mapping and info content
  const descriptions = {
    home: {title:'Home Plate', text:'Where batters stand and where runs are scored. Shape helps umpires judge the strike zone.'},
    first: {title:'First Base', text:'First base bag. Fielders often try to make plays here.'},
    second: {title:'Second Base', text:'Second base; common pivot for double plays.'},
    third: {title:'Third Base', text:'Third base; commonly called the hot corner.'},
    mound: {title:"Pitcher's Plate", text:"Narrow white plate on the mound; shortened and visually thicker per request."},
    shortstop: {title:"Shortstop", text:"Between second and third, slightly behind second; key infield defender."},
    infield: {title:"Infield", text:"Dirt area connecting the bases."},
    outfield: {title:"Outfield", text:"Grassy area beyond the baselines."}
  };

  const primary = ['home','first','second','third','mound','shortstop','infield','outfield'];
  const found = new Set();

  // mapping selectors
  const mapping = {
    home: ['#homePlate','button[data-area="home"]'],
    first: ['#firstBase','button[data-area="first"]'],
    second: ['#secondBase','button[data-area="second"]'],
    third: ['#thirdBase','button[data-area="third"]'],
    mound: ['#pitcherPlate','button[data-area="mound"]'],
    shortstop: ['#shortstop','button[data-area="shortstop"]'],
    infield: ['#infieldDirt','button[data-area="infield"]'],
    outfield: ['#fieldSVG','button[data-area="outfield"]']
  };

  const infoCard = document.getElementById('infoCard');
  const infoTitle = document.getElementById('infoTitle');
  const infoBody = document.getElementById('infoBody');
  const cardClose = document.getElementById('cardClose');
  const foundCount = document.getElementById('foundCount');
  const totalCount = document.getElementById('totalCount');
  totalCount.textContent = primary.length;

  function showCard(area, ev){
    const data = descriptions[area];
    if(!data) return;
    infoTitle.textContent = data.title;
    infoBody.textContent = data.text;
    infoCard.style.display = 'block';
    infoCard.setAttribute('aria-hidden','false');

    // discovery tracking
    if(primary.includes(area) && !found.has(area)){
      found.add(area);
      foundCount.textContent = found.size;
      if(found.size === primary.length){
        document.getElementById('complete').style.display = 'block';
      }
    }

    // position near event or element
    let x=window.innerWidth/2, y=window.innerHeight/2;
    if(ev && ev.clientX){
      x = ev.clientX + 12;
      y = ev.clientY + 6;
    } else {
      const svg = document.getElementById('fieldSVG');
      const r = svg.getBoundingClientRect();
      x = r.left + r.width*0.72;
      y = r.top + r.height*0.36;
    }
    infoCard.style.left = Math.max(12, x) + 'px';
    infoCard.style.top = Math.max(12, y) + 'px';

    // clamp to viewport
    requestAnimationFrame(()=>{
      const rect = infoCard.getBoundingClientRect(), pad=12;
      if(rect.right > window.innerWidth - pad) infoCard.style.left = (window.innerWidth - rect.width - pad) + 'px';
      if(rect.bottom > window.innerHeight - pad) infoCard.style.top = (window.innerHeight - rect.height - pad) + 'px';
    });
  }

  function hideCard(){ infoCard.style.display='none'; infoCard.setAttribute('aria-hidden','true'); }

  // wire interactions
  Object.keys(mapping).forEach(area=>{
    const [selSvg, selBtn] = mapping[area];
    const svgEl = document.querySelector(selSvg);
    const btnEl = document.querySelector(selBtn);
    if(svgEl){
      svgEl.addEventListener('click', (e)=>{ e.stopPropagation(); showCard(area,e); });
      svgEl.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') { e.preventDefault(); showCard(area,e); }});
    }
    if(btnEl){
      btnEl.addEventListener('click', (e)=>{ showCard(area,e); });
      btnEl.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') { e.preventDefault(); showCard(area,e); }});
    }
  });

  // close handlers
  cardClose.addEventListener('click', hideCard);
  cardClose.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') hideCard(); });

  document.addEventListener('click', (e)=>{
    const isHot = e.target.closest('.hotspot') || e.target.closest('.panel') || e.target.closest('.info');
    if(!isHot) hideCard();
  });
  document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') hideCard(); });

  // Ensure SVG elements with tabindex exist for keyboard focus
  window.addEventListener('resize', ()=>{ if(infoCard.style.display==='block'){} });
</script>
</body>
</html>
